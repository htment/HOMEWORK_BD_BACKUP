# HOMEWORK_BD_BACKUP
Задание 1. Резервное копирование
Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

Необходимо описать, какие варианты резервного копирования подходят в случаях:

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

Приведите ответ в свободной форме.

Задание 2. PostgreSQL
2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

Приведите ответ в свободной форме.

Задание 3. MySQL
3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

Приведите ответ в свободной форме.

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.




# Резервное копирование и восстановление БД

## Задание 1. Резервное копирование

### 1.1. Восстановление данных за предыдущий день
**Решение:** Полное резервное копирование (Full Backup)  
**Команды:**

# Для PostgreSQL
```
pg_dump -U username -d dbname -F c -f full_backup.dump
```
# Для MySQL
```
mysqldump -u root -p --all-databases > full_backup.sql
```
1.2. Восстановление данных за час до поломки
Решение: Комбинация инкрементного бэкапа + WAL/binlog
Команды:

# PostgreSQL (WAL)
```
pg_basebackup -U username -D /backup_location -Ft -z
```
# MySQL (binlog)
```
mysqlbinlog --start-datetime="2024-01-01 12:00:00" mysql-bin.000123 > incr_backup.sql
```

1.3. Моментальное переключение при поломке
Решение: Репликация с автоматическим failover
Инструменты:

``PostgreSQL: Patroni + etcd``

``MySQL: Group Replication + MySQL Router``

Задание 2. PostgreSQL
2.1. Резервирование и восстановление
Полный бэкап:

```
pg_dump -U postgres -d mydb -F c -f mydb_backup.dump
```
Восстановление:

```
pg_restore -U postgres -d mydb -C mydb_backup.dump
```
2.2. Автоматизация
Пример скрипта для cron:
```
#!/bin/bash
DATE=$(date +%Y-%m-%d)
pg_dump -U postgres -d mydb -F c -f /backups/mydb_$DATE.dump
find /backups -type f -name "*.dump" -mtime +7 -delete
```

Задание 3. MySQL
3.1. Инкрементное копирование
Настройка в my.cnf:


```
[mysqld]

log-bin=mysql-bin
binlog-format=ROW
```
Извлечение изменений:
```

mysqlbinlog --start-position=4 --stop-position=123 mysql-bin.000001 > incr_backup.sql
```
3.2. Преимущества репликации
Нулевое время восстановления при failover

Геораспределение данных

Горизонтальное масштабирование для чтения

Недостатки:

Требует дополнительных ресурсов

Сложность настройки



### Рекомендации по использованию:

1. Сохраните как `README.md` в корне репозитория
2. Для лучшей читаемости добавьте раздел "Содержание" с якорями
3. Можно добавить badges для статуса CI/CD (если автоматизация реализована)

Формат поддерживает:
- Подсветку синтаксиса для команд
- Четкую структуру разделов
- Легко читаемые списки преимуществ/недостатков

